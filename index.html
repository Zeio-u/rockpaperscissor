<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissor</title>
</head>
<body>

    <button id="Rock">Rock</button>
    <button id="Paper">Paper</button>
    <button id="Scissor">Scissor</button>

    <h2 id="Score"></h2>
    <h3 id="Result"></h3>
    <h1 id="finalResult"></h1>
    <button id="playAgain" hidden>Play Again</button>
    <script>
        let playerScore = 0;
        let computerScore = 0;
        function getComputerChoice(){
            let num = Math.floor(Math.random()* 3);
            switch(num){
                case 0:
                    computerChoice = 'Rock';
                    break;
                case 1:
                    computerChoice = 'Paper';
                    break;
                case 2:
                    computerChoice = 'Scissor';
            }
            return computerChoice;
        }
        
        function playRound(playerSelection) {
            const computerSelection = getComputerChoice();
            let result;
            if (playerSelection === 'Rock' && computerSelection === 'Scissor') {
                result = `You Win ! ${playerSelection} beats ${computerSelection}`;
            } else if (playerSelection === 'Paper' && computerSelection === 'Rock') {
                result = `You Win ! ${playerSelection} beats ${computerSelection}`;
            } else if (playerSelection === 'Scissor' && computerSelection === 'Paper') {
                result = `You Win ! ${playerSelection} beats ${computerSelection}`;
            } else if (playerSelection === computerSelection) {
                result = `Draw ! Both chose ${playerSelection}`;
            } else {
                result = `You Lose ! ${computerSelection} beats ${playerSelection}`;
            }
            game(result);
        }
        
        function game(result) {
            if (result.includes('Win')) {
                    playerScore = ++playerScore;
                } else {
                    computerScore = ++computerScore;
                }
            document.getElementById("Score").textContent = result;
            document.getElementById("Result").textContent = `Player Score : ${playerScore} | Computer Score : ${computerScore}`
            if (playerScore === 5 || computerScore === 5) {
                if (playerScore>computerScore){
                    fResult = 'Congratulations you Won !'
                } else {
                    fResult = 'Better luck next time !'
                } 
                document.getElementById("finalResult").textContent = fResult;

                document.getElementById("playAgain").style.display = 'block';
                document.getElementById("Rock").disabled = true;
                document.getElementById("Paper").disabled = true;
                document.getElementById("Scissor").disabled = true;
            } 


        }


        const buttons = document.querySelectorAll('button');
        buttons.forEach((button) => {
            button.addEventListener('click', () => {
                if (button.id === "playAgain"){
                    location.reload();
                } else {
                playRound(button.id)
                }
        });

        });
        //game();
    </script>
</body>
</html>
